{% extends "user_base.html" %}


{% block content %}
{% load static %}
<style>
    .banner-img {
        position: relative;
    }
    
    .banner-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0) 100%);
    }
    
    .banner-title {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
    }

    .brand-card:hover {
        transform: scale(1.05);
        box-shadow: 0 0 15px rgba(0, 123, 255, 0.2);
    }

    .product-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .product-card:hover {
        transform: scale(1.02);
        box-shadow: 0 0 12px rgba(0, 0, 0, 0.08);
    }

    .product-price span {
        font-size: 14px;
    }
    </style>
    
    

    <main class="main">
        <!-- Hero Slider Section -->
        <section class="home-slider position-relative pt-50">
            <div class="hero-slider-1 dot-style-1 dot-style-1-position-1">
                <!-- Slide 1 -->
                <div class="single-hero-slider">
                    <div class="container">
                        <div class="row align-items-center">
                            <div class="col-lg-5 col-md-6">
                                <div class="hero-slider-content">
                                    <h4>Trade-in Offer</h4>
                                    <h2 class="fw-bold">Super Value Deals</h2>
                                    <h1 class="fw-bold text-brand">On All Products</h1>
                                    <p>Save more with coupons & up to 70% off</p>
                                    <a class="btn btn-brush" href="{% url 'shop_lists' %}">Shop Now</a>
                                </div>
                            </div>
                            <div class="col-lg-7 col-md-6">
                                <div class="slider-img">
                                    <img src="{% static 'user/assets/imgs/my_images/img_bg_1.jpg' %}" alt="Slide 1">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
    
                <!-- Slide 2 -->
                <div class="single-hero-slider">
                    <div class="container">
                        <div class="row align-items-center">
                            <div class="col-lg-5 col-md-6">
                                <div class="hero-slider-content">
                                    <h4>Hot Promotions</h4>
                                    <h2 class="fw-bold">Fashion Trending</h2>
                                    <h1 class="fw-bold text-primary">Great Collection</h1>
                                    <p>Save more with coupons & up to 20% off</p>
                                    <a class="btn btn-brush" href="{% url 'shop_lists' %}">Discover Now</a>
                                </div>
                            </div>
                            <div class="col-lg-7 col-md-6">
                                <div class="slider-img">
                                    <img src="{% static 'user/assets/imgs/my_images/img_bg_3.jpg' %}" alt="Slide 2">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
    
                <!-- Slide 3 -->
                <div class="single-hero-slider">
                    <div class="container">
                        <div class="row align-items-center">
                            <div class="col-lg-5 col-md-6">
                                <div class="hero-slider-content">
                                    <h4>Upcoming Offer</h4>
                                    <h2 class="fw-bold">Big Deals From</h2>
                                    <h1 class="fw-bold text-success">Manufacturer</h1>
                                    <p>Clothing, Shoes, Bags, Wallets...</p>
                                    <a class="btn btn-brush" href="{% url 'shop_lists' %}">Shop Now</a>
                                </div>
                            </div>
                            <div class="col-lg-7 col-md-6">
                                <div class="slider-img">
                                    <img src="{% static 'user/assets/imgs/my_images/img_bg_2.jpg' %}" alt="Slide 3">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    
        <!-- Features Section -->
        <section class="featured section-padding">
            <div class="container">
                <div class="row text-center">
                    {% for i in "123456" %}
                    <div class="col-lg-2 col-md-4 mb-4">
                        <div class="banner-feature">
                            <img src="{% static 'user/assets/imgs/theme/icons/feature-'|add:i|add:'.png' %}" alt="Feature {{ i }}">
                            <h4 class="feature-title bg-{{ i }}">Feature Title</h4>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </section>
    
        <!-- Product Tabs Section -->
        <section class="product-tabs section-padding">
            <div class="container">
                <div class="tab-header d-flex justify-content-between align-items-center mb-3">
                    <ul class="nav nav-tabs" id="productTab" role="tablist">
                        <!-- Dynamic product tabs can be added here -->
                    </ul>
                    <a href="{% url 'shop_lists' %}" class="view-more d-none d-md-flex">
                        View More <i class="fi-rs-angle-double-small-right"></i>
                    </a>
                </div>
    
                <div class="tab-content" id="productTabContent">
                    <div class="tab-pane fade show active" id="tab-one" role="tabpanel">
                        <!-- Products will be dynamically rendered here -->
                    </div>
                </div>
            </div>
        </section>


                                
      
        
    <div class="row product-grid-4 g-3">
    {% for product in products %}
        <div class="col-lg-3 col-md-4 col-sm-6 col-12">
            <div class="product-cart-wrap shadow-sm rounded bg-white p-3 h-100 position-relative">
                <div class="product-img-action-wrap mb-2">
                    <div class="product-img product-img-zoom position-relative overflow-hidden rounded">
                        <a href="{% url 'product_detials' product.id %}">
                            <img class="default-img img-fluid transition" src="{{ product.product_img1.url }}" alt="not found" style="height: 250px; width: 100%; object-fit: cover;">
                            <img class="hover-img img-fluid position-absolute top-0 start-0 w-100 h-100 transition" src="{{ product.product_img1.url }}" alt="not found" style="object-fit: cover; opacity: 0; transition: opacity 0.3s;">
                        </a>
                        <span class="badge bg-danger position-absolute top-0 start-0 m-2 text-white">Hot</span>
                    </div>
                </div>
                <div class="product-content-wrap">
                    <h6 class="mb-1">
                        <a href="{% url 'product_detials' product.id %}" class="text-dark text-decoration-none fw-bold">{{ product.product_name }}</a>
                    </h6>
                    <div class="small text-muted mb-1">
                        {% with best_offer=product.get_best_offer %}
                            {% if best_offer %}
                                <span class="text-success fw-semibold">{{ best_offer.percentage }}% Off</span>
                            {% else %}
                                <span class="text-secondary">No Offer</span>
                            {% endif %}
                        {% endwith %}
                    </div>
                    <div class="product-price mb-2">
                        {% with best_offer=product.get_best_offer %}
                            {% if best_offer %}
                                <div class="text-danger fw-bold">â‚¹{{ product.offer_price }}</div>
                            {% else %}
                                <div class="text-primary fw-bold">â‚¹{{ product.offer_price }}</div>
                            {% endif %}
                        {% endwith %}
                        <div class="text-muted text-decoration-line-through small">â‚¹{{ product.original_price }}</div>
                    </div>

                    <!-- Wishlist Button Logic - Using Same Working Pattern -->
                    {% if user.is_authenticated %}
                        {% with user.wishlist as wishlist %}
                            {% if wishlist and product in wishlist.products.all %}
                                <span class="btn btn-success disabled" style="pointer-events: none;">
                                    <i class="fas fa-heart"></i> Added to Wishlist
                                </span>
                            {% else %}
                                <button class="btn btn-outline-danger add-to-wishlist-btn" 
                                        data-product-id="{{ product.id }}" 
                                        type="button">
                                    <i class="far fa-heart"></i> Add to Wishlist
                                </button>
                            {% endif %}
                        {% endwith %}
                    {% else %}
                        <a href="{% url 'login_view' %}" class="btn btn-outline-danger">
                            <i class="far fa-heart"></i> Login to Add to Wishlist
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endfor %}
</div>
        
        <!-- Banner.1 Full Width -->
        {% for banner in banners %}
            {% if banner.subtitle == "banner.1" %}
                <section class="banner-2 section-padding bg-light">
                    <div class="container">
                        <div class="row align-items-center g-4">
                            <div class="col-lg-7">
                                <div class="position-relative rounded overflow-hidden shadow-lg">
                                    <img src="{{ banner.banner_img.url }}" alt="{{ banner.title }}" class="img-fluid w-100" style="height: 380px; object-fit: cover;">
                                    <div class="position-absolute top-0 start-0 w-100 h-100 d-flex flex-column justify-content-center p-4" style="background-color: rgba(0, 0, 0, 0.45);">
                                        <h1 class="text-white fw-bold mb-2">{{ banner.title }}</h1>
                                        <p class="text-white mb-3">{{ banner.description }}</p>
                                        <a href="{% url 'shop_lists' %}" class="btn btn-outline-light btn-lg">
                                            SHOP NOW <i class="fi-rs-arrow-right ms-1"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-5">
                                <!-- Optionally add more content here -->
                            </div>
                        </div>
                    </div>
                </section>
            {% endif %}
        {% endfor %}
        
        <!-- Banner3 Grid Section -->
        <section class="banners py-5">
            <div class="container">
                <div class="row g-4">
                    {% for banner in banners %}
                        {% if banner.subtitle == "banner3" and banner.is_active %}
                            <div class="col-lg-4 col-md-6">
                                <div class="banner-img position-relative overflow-hidden rounded-4 shadow-lg">
                                    <a href="{% url 'shop_lists' %}">
                                        <img src="{{ banner.banner_img.url }}" alt="{{ banner.title }}"
                                             class="w-100 h-100 img-fluid"
                                             style="height: 230px; object-fit: cover; transition: transform 0.3s ease;">
                                    </a>
                                    <div class="banner-text position-absolute bottom-0 start-0 w-100 p-3"
                                         style="background: rgba(0, 0, 0, 0.6);">
                                        <h5 class="text-white mb-0 fw-semibold">{{ banner.title }}</h5>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </section>
        

   
    





    
    
        <section class="section-padding bg-white">
            <div class="container">
                {% if brands %}
                    <h3 class="section-title text-center mb-5 wow fadeInUp animated">
                        <span class="text-primary">Featured</span> Brands
                    </h3>
                    <div class="row justify-content-center g-4">
                        {% for brand in brands %}
                            {% if brand.is_active %}
                                <div class="col-xl-2 col-lg-3 col-md-4 col-6">
                                    <div class="brand-card p-3 border rounded-4 shadow-sm text-center bg-light h-100 d-flex align-items-center justify-content-center"
                                         style="transition: transform 0.3s ease, box-shadow 0.3s ease;">
                                        <img src="{{ brand.brand_image.url }}" alt="{{ brand.name }}" class="img-fluid"
                                             style="max-height: 60px; object-fit: contain;">
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% else %}
                    <p class="text-center text-muted">No featured brands available.</p>
                {% endif %}
            </div>
        </section>
        

    
    
                {% comment %} <!-- Product Section -->
                <div class="col-lg-9 col-md-12">
                    <div class="tab-content wow fadeIn animated" id="myTabContent-1">
                        <div class="tab-pane fade show active" id="tab-one-1" role="tabpanel" aria-labelledby="tab-one-1">
                            <div class="row">
                                
                                            <div class="col-12">
                                                <div class="row related-products">
                                                    {% for product in monthly_best_sellers %}
                                                    <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                                                        <div class="card h-100">
                                                            <img class="card-img-top img-fluid" src="{{ product.product_img1.url }}" alt="{{ product.product_name }}" style="height: 200px; object-fit: cover;">
                                                            <div class="card-body">
                                                                <h5 class="card-title">{{ product.product_name }}</h5>
                                                                <p class="card-text">{{ product.category }}</p>
                                                                <p class="card-text rating-result" title="{{ product.rating_percentage }}">
                                                                    <span>{{ product.rating_percentage }}</span>
                                                                </p>
                                                                <p class="card-text product-price">
                                                                    <span>â‚¹{{ product.offer_price }}</span>
                                                                    {% if product.orginal_price %}
                                                                        <span class="orginal_price">â‚¹{{ product.orginal_price }}</span>
                                                                    {% endif %}
                                                                </p>
                                                                <a href="{% url 'add_wishlist' product.id %}" class="btn btn-outline-danger btn-sm">
                                                                    <i class="fi-rs-heart"></i> Add to Wishlist
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>  {% endcomment %}
                  



                                <section class="mb-5 text-center">
                                    <div class="container padding-left-12">
                                        <div class="row justify-content-center gy-7">
                                            
                                            <!-- Deals & Outlet -->
                                            <div class="col-12 col-md-6 col-lg-4">
                                                <h4 class="section-title style-1 mb-4 wow fadeInUp animated">ðŸ”¥ Deals & Outlet</h4>
                                                <div class="d-flex flex-column align-items-center gap-4">
                                                    {% for product in new_arrivals %}
                                                    <div class="bg-light border rounded shadow-sm p-3 w-100" style="max-width: 320px;">
                                                        <a href="{% url 'shop_lists' %}">
                                                            <img src="{{ product.product_img1.url }}" alt="{{ product.product_name }}" class="img-fluid rounded mb-2" style="width: 100px; height: 100px; object-fit: cover;">
                                                        </a>
                                                        <h6 class="fw-semibold text-truncate">
                                                            <a href="{% url 'shop_lists' %}" class="text-dark text-decoration-none">{{ product.product_name }}</a>
                                                        </h6>
                                                        <div class="product-price d-flex justify-content-center gap-2">
                                                            <span class="text-danger fw-bold">â‚¹{{ product.offer_price }}</span>
                                                            <span class="text-muted text-decoration-line-through small">â‚¹{{ product.old_price }}</span>
                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                
                                            <!-- Top Selling -->
                                            <div class="col-12 col-md-6 col-lg-4">
                                                <h4 class="section-title style-1 mb-4 wow fadeInUp animated">ðŸ“ˆ Top Selling</h4>
                                                <div class="d-flex flex-column align-items-center gap-4">
                                                    {% for product in most_sold_products %}
                                                    <div class="bg-light border rounded shadow-sm p-3 w-100" style="max-width: 320px;">
                                                        <a href="{% url 'shop_lists' %}">
                                                            <img src="{{ product.product_img1.url }}" alt="{{ product.product_name }}" class="img-fluid rounded mb-2" style="width: 100px; height: 100px; object-fit: cover;">
                                                        </a>
                                                        <h6 class="fw-semibold text-truncate">
                                                            <a href="{% url 'shop_lists' %}" class="text-dark text-decoration-none">{{ product.product_name }}</a>
                                                        </h6>
                                                        <div class="product-price d-flex justify-content-center gap-2">
                                                            <span class="text-success fw-bold">â‚¹{{ product.offer_price }}</span>
                                                            <span class="text-muted text-decoration-line-through small">â‚¹{{ product.old_price }}</span>
                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                
                                            <!-- Hot Releases -->
                                            {% comment %} <div class="col-12 col-md-6 col-lg-4">
                                                <h4 class="section-title style-1 mb-4 wow fadeInUp animated">ðŸš€ Hot Releases</h4>
                                                <div class="d-flex flex-column align-items-center gap-4">
                                                    {% for product in hot_releases %}
                                                    <div class="bg-light border rounded shadow-sm p-3 w-100" style="max-width: 320px;">
                                                        <a href="{% url 'shop_lists' %}">
                                                            <img src="{{ product.product_img1.url }}" alt="{{ product.product_name }}" class="img-fluid rounded mb-2" style="width: 100px; height: 100px; object-fit: cover;">
                                                        </a>
                                                        <h6 class="fw-semibold text-truncate">
                                                            <a href="{% url 'shop_lists' %}" class="text-dark text-decoration-none">{{ product.product_name }}</a>
                                                        </h6>
                                                        <div class="product-price d-flex justify-content-center gap-2">
                                                            <span class="text-primary fw-bold">â‚¹{{ product.offer_price }}</span>
                                                            <span class="text-muted text-decoration-line-through small">â‚¹{{ product.old_price }}</span>
                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                </div>
                                            </div> {% endcomment %}
                                
                                        </div>
                                    </div>
                                </section>
                                
                                
                                
                                
</main>


{% endblock content %}

